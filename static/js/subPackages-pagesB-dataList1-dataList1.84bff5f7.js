(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subPackages-pagesB-dataList1-dataList1"],{1469:function(t,e,n){"use strict";n.r(e);var a=n("8f99"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"4b6f":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}));var a={uniTooltip:n("7134").default,uniPopup:n("7f2d").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("back",{ref:"child",attrs:{text:t.myAddress,type:"true",navType:8}}),a("v-uni-view",{staticClass:"trade"},[a("v-uni-view",{staticClass:"tradeI"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(t.$t("trade1")))]),a("uni-tooltip",{attrs:{placement:"right"},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-uni-view",{staticClass:"uni-stat-tooltip"},[a("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("stack7")))]),a("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("stack8")))]),a("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("stack9")))])],1)]},proxy:!0}])},[a("v-uni-view",{staticClass:"samll"},[a("v-uni-view",{staticClass:"wz wz1"},[t._v(t._s(t.$t("stack6")))]),a("v-uni-view",{staticClass:"wz"},[t._v("："+t._s(0==t.modelList[0]?t.$t("stack7_1"):1==t.modelList[0]?t.$t("stack8_1"):t.$t("stack10")))])],1)],1),0!=t.modelList[0]?a("v-uni-view",{staticClass:"linghtPrice",staticStyle:{"margin-top":"20rpx"}},[a("v-uni-text",[t._v(t._s(t.$t("dataList1"))+"："+t._s(t._f("filterNum")(t.modelList[1]))+" U")])],1):t._e(),0!=t.modelList[0]?a("v-uni-view",{staticClass:"linghtPrice"},[a("v-uni-text",[t._v(t._s(t.$t("dataList2"))+"："+t._s(t._f("filterNum")(t.modelList[2]))+" U")])],1):t._e()],1),a("v-uni-view",{staticClass:"img"},[a("v-uni-image",{attrs:{src:n("72e7"),mode:""}})],1)],1),a("v-uni-view",{staticClass:"btnList"},[t.ApproveStack?a("v-uni-view",{staticClass:"btn1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showStack(1)}}},[t._v(t._s(t.$t("package22")))]):a("v-uni-view",{staticClass:"btn1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickApoveStack.apply(void 0,arguments)}}},[t._v(t._s(t.$t("stack1")))]),a("v-uni-view",{staticClass:"btn2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickGoList("./recodingList")}}},[t._v(t._s(t.$t("trade3")))])],1),a("v-uni-view",{staticClass:"price"},[a("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("stack11"))+"：")]),a("v-uni-view",{staticClass:"num"},[t._v(t._s(t._f("filterNum2")(t.nowPriceNum)))])],1),a("v-uni-view",{staticClass:"listData"},[a("v-uni-view",{staticClass:"list"},t._l(4,(function(e,n){return a("v-uni-view",{key:n,staticClass:"item",class:"item"+(n+1)},[a("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$t("tradeList"+(n+1))))])],1)})),1),a("v-uni-view",{staticClass:"itemList"},t._l(t.allSellData,(function(e,n){return a("v-uni-view",{key:n,staticClass:"info"},[a("v-uni-view",{staticClass:"text"},[t._v(t._s(t._f("filterNum1")(e.sellCoin)))]),a("v-uni-view",{staticClass:"text"},[t._v(t._s(e.sellU))]),a("v-uni-view",{staticClass:"text"},[t._v("$"+t._s(t._f("filterNum2")(e.sellPrice)))]),a("v-uni-view",{staticClass:"form"},[t.ApproveUsdt?a("v-uni-view",{staticClass:"btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.buyNow(e.sellId,e.sellCoin)}}},[t._v(t._s(t.$t("package28")))]):a("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickApoveUsdt.apply(void 0,arguments)}}},[t._v(t._s(t.$t("index25")))])],1)],1)})),1)],1),a("uni-popup",{ref:"popup",attrs:{type:"bottom","mask-click":!0}},[a("v-uni-view",{staticClass:"insureBox"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-view",{staticClass:"titleBox"},[t._v(t._s(t.$t("package22")))]),a("v-uni-view",{staticClass:"close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel(1)}}},[a("v-uni-image",{attrs:{src:"/static/close.png",mode:""}})],1)],1),a("v-uni-view",{staticClass:"input"},[a("v-uni-input",{attrs:{type:"number",placeholder:t.$t("package23")},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.changeNumStatus1.apply(void 0,arguments)}},model:{value:t.priceNum,callback:function(e){t.priceNum=e},expression:"priceNum"}})],1),a("v-uni-view",{staticClass:"input-label"},[a("v-uni-text",[t._v(t._s(t.$t("package8"))+":1.05")]),0!=t.modelList[0]?a("v-uni-text",[t._v(t._s(t.$t("dataList1"))+"："+t._s(t._f("filterNum")(t.modelList[1])))]):t._e(),0!=t.modelList[0]?a("v-uni-text",[t._v(t._s(t.$t("dataList2"))+"："+t._s(t._f("filterNum")(t.modelList[2])))]):t._e()],1),a("v-uni-view",{staticClass:"input"},[a("v-uni-input",{attrs:{type:"number",placeholder:t.$t("package24")},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.changeNumStatus.apply(void 0,arguments)}},model:{value:t.etsNum,callback:function(e){t.etsNum=e},expression:"etsNum"}})],1),a("v-uni-view",{staticClass:"input-label"},[a("v-uni-text",[t._v(t._s(t.$t("package25"))+":"+t._s(t.amountEts))])],1),a("v-uni-view",{staticClass:"input input1"},[a("v-uni-label",[t._v(t._s(t.$t("package30"))+":")]),a("v-uni-input",{attrs:{type:"number",disabled:!0},model:{value:t.uNum,callback:function(e){t.uNum=e},expression:"uNum"}})],1),a("v-uni-view",{staticClass:"btnList"},[t.ApproveETS&&t.ApproveStack?a("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickBuySell()}}},[t._v(t._s(t.$t("index18")))]):t._e(),t.ApproveETS?t._e():a("v-uni-view",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickApoveLP.apply(void 0,arguments)}}},[t._v(t._s(t.$t("index25"))+"U")])],1)],1)],1),a("v-uni-view",{staticClass:"nbsp"}),a("w-loading",{ref:"loading",attrs:{text:"",mask:"true",click:"false"}})],1)},s=[]},6210:function(t,e,n){var a=n("c86c"),i=n("2ec5"),s=n("336c");e=a(!1);var r=i(s);e.push([t.i,".content[data-v-125504c2]{width:100%;background-color:#000;background-size:100% 100%;height:100%;min-height:100vh;box-sizing:border-box;position:relative}.content .trade[data-v-125504c2]{padding:%?20?% %?35?%;display:flex;align-items:flex-start;justify-content:space-between}.content .trade .tradeI[data-v-125504c2]{padding-top:%?20?%}.content .trade .tradeI .title[data-v-125504c2]{font-weight:700;font-size:%?48?%;color:#fff}.content .trade .tradeI .samll[data-v-125504c2]{display:flex;align-items:center}.content .trade .tradeI .samll .wz[data-v-125504c2]{margin-top:%?18?%;font-weight:700;font-size:%?28?%;color:#fff;padding-bottom:%?10?%}.content .trade .tradeI .samll .wz1[data-v-125504c2]{border-bottom:%?2?% dashed}.content .trade .tradeI .linghtPrice[data-v-125504c2]{display:flex;align-content:center}.content .trade .tradeI .linghtPrice uni-text[data-v-125504c2]{font-weight:700;font-size:%?28?%;color:#e5e5e5}.content .trade .img[data-v-125504c2]{width:%?387?%;height:%?271?%}.content .trade .img uni-image[data-v-125504c2]{width:100%;height:100%}.content .listData[data-v-125504c2]{background-color:#171717;border-radius:%?30?%;padding:%?30?%}.content .listData .list[data-v-125504c2]{border:%?2?% solid #fff;display:flex;align-items:center;justify-content:space-between;padding:%?25?%;border-radius:%?50?%}.content .listData .list .item[data-v-125504c2]{width:20%;text-align:center}.content .listData .list .item .text[data-v-125504c2]{font-size:%?22?%;color:#fffefe}.content .listData .list .item4[data-v-125504c2]{width:40%;text-align:center}.content .listData .list .item4 .text[data-v-125504c2]{font-size:%?22?%;color:#fffefe}.content .listData .itemList[data-v-125504c2]{margin-top:%?30?%;padding:0 %?25?%}.content .listData .itemList .info[data-v-125504c2]{margin-bottom:%?30?%;display:flex;align-items:center;justify-content:space-between}.content .listData .itemList .info .text[data-v-125504c2]{width:20%;text-align:center;font-size:%?30?%;color:#fffefe}.content .listData .itemList .info .form[data-v-125504c2]{width:40%;text-align:center}.content .listData .itemList .info .form .btn[data-v-125504c2]{margin:0 auto;display:flex;align-items:center;justify-content:center;width:%?191?%;height:%?80?%;background:#fff;border-radius:%?40?%;font-size:%?30?%;color:#000}.content .listData .itemList .info[data-v-125504c2]:last-child{margin-bottom:0}.content .btnList[data-v-125504c2]{display:flex;align-items:center;justify-content:space-around;margin:%?50?% 0}.content .btnList .btn1[data-v-125504c2]{width:%?351?%;height:%?80?%;background-image:url("+r+");background-size:100% 100%;border-radius:%?40?%;font-size:%?29?%;color:#fff;font-weight:700;display:flex;align-items:center;justify-content:center}.content .btnList .btn2[data-v-125504c2]{width:%?261?%;height:%?80?%;font-weight:700;font-size:%?29?%;background:#fff;border-radius:%?40?%;display:flex;align-items:center;justify-content:center}.content .stack[data-v-125504c2]{padding:0 %?30?%;display:flex;align-items:center;justify-content:center}.content .stack .btn1[data-v-125504c2]{width:30%;height:%?80?%;background-color:#171717;font-size:%?24?%;color:#fff;display:flex;align-items:center;justify-content:center;border-top-left-radius:%?40?%;border-bottom-left-radius:%?40?%}.content .stack .input[data-v-125504c2]{width:69%;height:%?80?%;background-color:#171717;border-top-right-radius:%?40?%;border-bottom-right-radius:%?40?%;padding:0 %?40?%;margin-left:%?10?%}.content .stack .input .text[data-v-125504c2]{font-size:%?24?%;font-weight:700;color:#cc7e16;text-align:right;line-height:%?80?%}.content .price[data-v-125504c2]{display:flex;align-items:center;padding:%?30?%}.content .price .text[data-v-125504c2]{font-size:%?24?%;color:#fff}.content .price .num[data-v-125504c2]{font-size:%?24?%;color:#fff}.nbsp[data-v-125504c2]{width:100%;height:%?30?%}.uni-stat-tooltip[data-v-125504c2]{width:%?400?%}.insureBox[data-v-125504c2]{width:98%;margin:0 auto;background:#fff;padding:%?42?% 0;border-top-right-radius:%?30?%;border-top-left-radius:%?30?%}.insureBox .title[data-v-125504c2]{display:flex;align-items:center;justify-content:space-between;margin-bottom:%?42?%;padding:0 %?40?%}.insureBox .title .titleBox[data-v-125504c2]{min-width:%?260?%;width:auto;height:%?82?%;line-height:%?82?%;background-size:100% 100%;text-align:left;font-size:%?32?%;font-family:Microsoft YaHei;font-weight:700;color:#000}.insureBox .title .close uni-image[data-v-125504c2]{width:%?30?%;height:%?30?%}.insureBox .input[data-v-125504c2]{width:80%;margin:0 auto;padding:%?28?% %?29?%;border-radius:%?20?%;align-items:center;background:#fff;box-shadow:%?0?% %?8?% %?16?% rgba(0,0,0,.25);border-radius:20px;font-size:%?28?%;font-family:Microsoft YaHei;font-weight:400;color:#000;margin-bottom:%?20?%}.insureBox .input1[data-v-125504c2]{display:flex;align-items:center}.insureBox .input-label[data-v-125504c2]{padding:0 %?50?%;font-size:%?24?%;color:#666;font-family:Microsoft YaHei;font-weight:400;margin-bottom:%?20?%}.insureBox .input-label uni-text[data-v-125504c2]{margin-right:%?20?%}.insureBox .samll[data-v-125504c2]{width:80%;margin:0 auto;display:flex;align-items:center}.insureBox .samll .text[data-v-125504c2]{font-size:%?24?%;color:#000}.insureBox .samll .num[data-v-125504c2]{font-size:%?24?%;color:#000}.insureBox .btnList[data-v-125504c2]{display:flex;align-items:center;justify-content:space-around;margin-top:%?64?%}.insureBox .btnList .left[data-v-125504c2]{width:%?270?%;padding-top:%?28?%;padding-bottom:%?40?%;background-size:100% 100%;display:flex;align-items:center;justify-content:center;font-size:%?30?%;font-family:Microsoft YaHei;font-weight:700;color:#000}.insureBox .btnList .right[data-v-125504c2]{width:80%;height:%?80?%;border-radius:%?30?%;background-color:#000;display:flex;align-items:center;justify-content:center;font-size:%?30?%;font-family:Microsoft YaHei;font-weight:700;color:#fff}",""]),t.exports=e},"8f99":function(t,e,n){"use strict";(function(t){n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("2634")),s=a(n("2fdc"));n("c9b5"),n("bf0f"),n("ab80"),n("e966"),n("e838"),n("2797"),n("c223"),n("d4b5"),n("64aa");var r=a(n("6de5")),o=n("4e83"),u=a(n("31e7")),c=a(n("6b97")),l=a(n("bf51")),f=n("9f524"),d=a(n("a5ab")),p=a(n("ea36")),v=n("3387"),m={components:{wLoading:p.default,back:u.default},data:function(){return{etsNum:"",uNum:"",priceNum:"",amountEts:0,contract:{},myAddress:"",lamount:"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",ApproveETS:!1,ApproveStack:!1,modelList:[],nowPriceNum:0,ApproveUsdt:!1,page:1,limit:20,limitAll:0,allSellData:[],manageNum:0,usdtAllowanceB:0,etsAllowanceB:0,imageUrl:""}},filters:{plusXing:function(t){if(0==t.length)return"";t.length;for(var e="",n=0;n<4;n++)e+="*";return t.substring(0,6)+e+t.substring(t.length-4)},filterNum:function(t){if(void 0==t)return 0;var e=t.toString(),n=o.ethers.utils.formatUnits(e);return Math.floor(1e4*n)/1e4},filterNum1:function(t){if(void 0==t)return 0;var e=t;return parseInt(e)===parseFloat(e)?e:Math.floor(100*e)/100},filterNum2:function(t){if(void 0==t)return 0;var e=t;return parseInt(e)===parseFloat(e)?e:Math.floor(100*e)/100}},onLoad:function(){var t=this;this.debouncedFetch=(0,v.debounce)(this.getMyUNum,1e3),this.debouncedFetch1=(0,v.debounce)(this.getPriceNum,1e3),this.Init((function(){uni.setStorageSync("address",t.myAddress),""!=uni.getStorageSync("language")&&(t.language=uni.getStorageSync("language"));var e=new o.ethers.providers.Web3Provider(window.ethereum);t.etsBuyContract=new o.ethers.Contract(t.buySellContract,l.default,e.getSigner()),t.etsContract=new o.ethers.Contract(t.etsCoinContract,c.default,e.getSigner()),t.stackContract=new o.ethers.Contract(t.StackContractAddress,c.default,e.getSigner()),t.usdtContract=new o.ethers.Contract(t.usdtContractAddress,c.default,e.getSigner()),t.usdtBuyContract=new o.ethers.Contract(t.buyContract,d.default,e.getSigner()),t.getShowType(),t.getAllowance(),t.getStackAllowance(),t.getNowPrice(),t.getUsdtAllowance(),t.getAllSellInfo(),t.etsBalanceOf()}))},onReady:function(){},beforeDestroy:function(){this.debouncedFetch.cancel(),this.debouncedFetch1.cancel()},onReachBottom:function(){t.log(123,this.limitAll),this.page<this.limitAll&&(this.page++,this.getAllSellInfo())},methods:{preloadImages:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=["../../../subPackages/static/trade.gif"],e.next=3,n.forEach((function(e){var n=new Image;n.src=e,n.onload=function(){"../../../subPackages/static/trade.gif"==e&&(t.imageUrl=e)},n.onerror=function(t){}}));case 3:case"end":return e.stop()}}),e)})))()},getMyUNum:function(t){if(parseFloat(t)>parseFloat(this.amountEts))uni.showToast({title:this.$t("index38"),icon:"none"});else{var e=t*this.priceNum;parseInt(e)===parseFloat(e)?this.uNum=parseInt(e):this.uNum=Math.floor(100*e)/100}},getPriceNum:function(t){var e=this.mobileFilter1(this.modelList[1]),n=this.mobileFilter1(this.modelList[2]);if(parseFloat(t)<parseFloat(e))uni.showToast({title:this.$t("package12"),icon:"none"});else if(parseFloat(t)>parseFloat(n))uni.showToast({title:this.$t("package13"),icon:"none"});else if(""!=this.etsNum){var a=this.etsNum*t;parseInt(a)===parseFloat(a)?this.uNum=parseInt(a):this.uNum=Math.floor(100*a)/100}},changeNumStatus:function(t){this.debouncedFetch(t.detail.value)},changeNumStatus1:function(t){this.debouncedFetch1(t.detail.value)},etsBalanceOf:function(){var e=this;return(0,s.default)((0,i.default)().mark((function n(){return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.usdtContract.balanceOf(e.myAddress).then((function(t){e.amountEts=e.mobileFilter1(t)})).catch((function(e){t.log(e),uni.showToast({title:e,icon:"none"})}));case 1:case"end":return n.stop()}}),n)})))()},getAllSellInfo:function(){var t=this;(0,f.getAllSellV2)({page:this.page,limit:this.limit}).then((function(e){e.success&&(t.allSellData=t.allSellData.concat(e.data),t.limitAll=t.pageCount(e.num,t.limit))}))},pageCount:function(t,e){return t>0?t<e?1:t%e?parseInt(t/e)+1:t/e:0},showStack:function(t){1==t?this.$refs.popup.open():this.$refs.popup1.open()},clickGoList:function(t){uni.navigateTo({url:t})},cancel:function(t){1==t?this.$refs.popup.close():this.$refs.popup1.close()},getShowType:function(){var t=this;this.usdtBuyContract.getSellInfo().then((function(e,n){t.modelList=e}))},getNowPrice:function(){var t=this;this.usdtBuyContract.getNowPrice().then((function(e,n){t.nowPriceNum=t.mobileFilter1(e)}))},clickBuySell:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n,a,s,u;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.etsNum){e.next=2;break}return e.abrupt("return");case 2:if(!(parseFloat(t.etsNum)>parseFloat(t.amountEts))){e.next=5;break}return uni.showToast({title:t.$t("index38"),icon:"none"}),e.abrupt("return");case 5:if(!(t.usdtAllowanceB<t.etsNum)){e.next=9;break}return n=t,uni.showModal({title:n.$t("package18"),content:n.$t("package19"),cancelText:n.$t("package21"),confirmText:n.$t("package20"),success:function(t){t.confirm?n.clickApoveLP():t.cancel}}),e.abrupt("return");case 9:return t.$refs.loading.open(),a=o.ethers.utils.parseEther(t.uNum.toString()),s=o.ethers.utils.parseEther(t.etsNum),e.next=14,t.usdtBuyContract.doBuy(a,s).catch((function(e){t.$refs.loading.close();var n=JSON.parse(JSON.stringify(e));(0,r.default)({title:"error",text:n.reason,icon:"error"})}));case 14:if(u=e.sent,!u){e.next=25;break}return e.next=18,u.wait();case 18:t.$refs.loading.close(),t.$refs.popup.close(),t.allSellData=[],t.getAllSellInfo(),(0,r.default)({title:"success",icon:"success"}),t.etsNum="",t.uNum="";case 25:case"end":return e.stop()}}),e)})))()},getAllowance:function(){var e=this;this.usdtContract.allowance(this.myAddress,this.buyContract).then((function(t){var n=e.mobileFilter1(t);"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"==t._hex?e.usdtAllowanceB="999999999999999999":e.usdtAllowanceB=n,parseInt(n)<=parseInt(0)?e.ApproveETS=!1:e.ApproveETS=!0})).catch((function(e){t.log(e),uni.showToast({title:e,icon:"none"})}))},clickApoveLP:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.loading.open(),e.next=3,t.usdtContract.approve(t.buyContract,t.lamount).catch((function(e){t.$refs.loading.close(),(0,r.default)({title:"error",text:e.reason,icon:"error"})}));case 3:if(n=e.sent,!n){e.next=17;break}return e.prev=5,e.next=8,n.wait();case 8:t.$refs.loading.close(),(0,r.default)({title:t.$t("appoveSuccess"),icon:"success"}),t.getAllowance(),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](5),t.$refs.loading.close(),(0,r.default)({title:"error",text:e.t0.reason,icon:"error"});case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))()},getStackAllowance:function(){var e=this;this.stackContract.allowance(this.myAddress,this.StackManageContract).then((function(t){var n=e.mobileFilter1(t);e.manageNum=n,parseInt(n)<=parseInt(0)?e.ApproveStack=!1:e.ApproveStack=!0})).catch((function(e){t.log(e),uni.showToast({title:e,icon:"none"})}))},clickApoveStack:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.loading.open(),e.next=3,t.stackContract.approve(t.StackManageContract,t.lamount).catch((function(e){t.$refs.loading.close(),(0,r.default)({title:"error",text:e.reason,icon:"error"})}));case 3:if(n=e.sent,!n){e.next=17;break}return e.prev=5,e.next=8,n.wait();case 8:t.$refs.loading.close(),(0,r.default)({title:t.$t("appoveSuccess"),icon:"success"}),t.getStackAllowance(),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](5),t.$refs.loading.close(),(0,r.default)({title:"error",text:e.t0.reason,icon:"error"});case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))()},getUsdtAllowance:function(){var e=this;this.etsContract.allowance(this.myAddress,this.buyContract).then((function(t){var n=e.mobileFilter1(t);"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"==t._hex?e.etsAllowanceB="999999999999999999":e.etsAllowanceB=n,parseInt(n)<=parseInt(0)?e.ApproveUsdt=!1:e.ApproveUsdt=!0})).catch((function(e){t.log(e),uni.showToast({title:e,icon:"none"})}))},clickApoveUsdt:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.loading.open(),e.next=3,t.etsContract.approve(t.buyContract,t.lamount).catch((function(e){t.$refs.loading.close(),(0,r.default)({title:"error",text:e.reason,icon:"error"})}));case 3:if(n=e.sent,!n){e.next=17;break}return e.prev=5,e.next=8,n.wait();case 8:t.$refs.loading.close(),(0,r.default)({title:t.$t("appoveSuccess"),icon:"success"}),t.getUsdtAllowance(),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](5),t.$refs.loading.close(),(0,r.default)({title:"error",text:e.t0.reason,icon:"error"});case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))()},buyNow:function(e,n){var a=this;return(0,s.default)((0,i.default)().mark((function s(){var o,u;return(0,i.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.log("1111",n),t.log("222",a.etsAllowanceB),!(a.etsAllowanceB<n)){i.next=6;break}return o=a,uni.showModal({title:o.$t("package18"),content:o.$t("package19"),cancelText:o.$t("package21"),confirmText:o.$t("package20"),success:function(t){t.confirm?o.clickApoveUsdt():t.cancel}}),i.abrupt("return");case 6:return a.$refs.loading.open(),i.next=9,a.usdtBuyContract.doSell(e).catch((function(t){a.$refs.loading.close();var e=JSON.parse(JSON.stringify(t));(0,r.default)({title:"error",text:e.reason,icon:"error"})}));case 9:if(u=i.sent,!u){i.next=17;break}return i.next=13,u.wait();case 13:a.allSellData=[],a.getAllSellInfo(),a.$refs.loading.close(),(0,r.default)({title:"success",icon:"success"});case 17:case"end":return i.stop()}}),s)})))()},mobileFilter1:function(t){var e=t.toString(),n=this.ethers.utils.formatUnits(e);return parseInt(n)===parseFloat(n)?parseInt(n):Number(n).toFixed(2)},Init:function(e){var n=this;return(0,s.default)((0,i.default)().mark((function a(){var s,r;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("undefined"!==typeof window.ethereum){a.next=4;break}t.log("请安装MetaMask"),a.next=12;break;case 4:return s=new o.ethers.providers.Web3Provider(window.ethereum),a.next=7,s.send("eth_requestAccounts",[]);case 7:return r=a.sent,a.next=10,window.ethereum.request({method:"eth_requestAccounts"});case 10:n.myAddress=r[0],e();case 12:case"end":return a.stop()}}),a)})))()}}};e.default=m}).call(this,n("ba7c")["default"])},a5ab:function(t){t.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"_owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_backId","type":"uint256"}],"name":"cancelBuy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"fundAddress","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"claimBalance","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"fundAddress","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"claimToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"needCoin","type":"uint256"}],"name":"doBuy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"buyId","type":"uint256"}],"name":"doSell","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"page","type":"uint256"},{"internalType":"uint256","name":"limit","type":"uint256"}],"name":"getChangeList","outputs":[{"internalType":"uint256","name":"length","type":"uint256"},{"internalType":"uint256[]","name":"idBack","type":"uint256[]"},{"internalType":"address[]","name":"addressList","type":"address[]"},{"internalType":"uint256[]","name":"doTypeList","type":"uint256[]"},{"internalType":"uint256[]","name":"exIdList","type":"uint256[]"},{"internalType":"uint256[]","name":"logTimeList","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"searchAddress","type":"address"}],"name":"getMaxSell","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNowPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSellId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSellInfo","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"page","type":"uint256"},{"internalType":"uint256","name":"limit","type":"uint256"}],"name":"getSellList","outputs":[{"internalType":"uint256","name":"length","type":"uint256"},{"internalType":"uint256[]","name":"idBack","type":"uint256[]"},{"internalType":"address[]","name":"addressList","type":"address[]"},{"internalType":"uint256[]","name":"amountList","type":"uint256[]"},{"internalType":"uint256[]","name":"needAmountList","type":"uint256[]"},{"internalType":"uint256[]","name":"priceList","type":"uint256[]"},{"internalType":"uint256[]","name":"logTimeList","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSuccessId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_setSell","type":"uint256"}],"name":"setDayCanSell","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setNowStatus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_setChangePer","type":"uint256"}],"name":"setNowStatus1","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_setMin","type":"uint256"},{"internalType":"uint256","name":"_setMax","type":"uint256"}],"name":"setNowStatus2","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"},{"internalType":"bool","name":"state","type":"bool"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newAddress","type":"address"}],"name":"updateBackAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newAddress","type":"address"}],"name":"updateDzAdminContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newAddress","type":"address"}],"name":"updateLevelContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newAddress","type":"address"}],"name":"updateMarketAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newAddress","type":"address"}],"name":"updateetrwAddress","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},c153:function(t,e,n){"use strict";var a=n("f06e"),i=n.n(a);i.a},dd2c:function(t,e,n){"use strict";n.r(e);var a=n("4b6f"),i=n("1469");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("c153");var r=n("828b"),o=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"125504c2",null,!1,a["a"],void 0);e["default"]=o.exports},f06e:function(t,e,n){var a=n("6210");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("135c654e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);